!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-transition"],r):r(t.venn=t.venn||{},t.d3,t.d3)}(this,function(t,r,n){"use strict";function e(t,r){var n,e=i(t),o=e.filter(function(r){return a(r,t)}),f=0,h=0,x=[];if(o.length>1){var c=l(o);for(n=0;n<o.length;++n){var g=o[n];g.angle=Math.atan2(g.x-c.x,g.y-c.y)}o.sort(function(t,r){return r.angle-t.angle});var v=o[o.length-1];for(n=0;n<o.length;++n){var p=o[n];h+=(v.x+p.x)*(p.y-v.y);for(var y={x:(p.x+v.x)/2,y:(p.y+v.y)/2},d=null,m=0;m<p.parentIndex.length;++m)if(v.parentIndex.indexOf(p.parentIndex[m])>-1){var M=t[p.parentIndex[m]],z=Math.atan2(p.x-M.x,p.y-M.y),b=Math.atan2(v.x-M.x,v.y-M.y),w=b-z;w<0&&(w+=2*Math.PI);var I=b-w/2,R=u(y,{x:M.x+M.radius*Math.sin(I),y:M.y+M.radius*Math.cos(I)});(null===d||d.width>R)&&(d={circle:M,width:R,p1:p,p2:v})}null!==d&&(x.push(d),f+=s(d.circle.radius,d.width),v=p)}}else{var P=t[0];for(n=1;n<t.length;++n)t[n].radius<P.radius&&(P=t[n]);var A=!1;for(n=0;n<t.length;++n)if(u(t[n],P)>Math.abs(P.radius-t[n].radius)){A=!0;break}A?f=h=0:(f=P.radius*P.radius*Math.PI,x.push({circle:P,p1:{x:P.x,y:P.y+P.radius},p2:{x:P.x-B,y:P.y+P.radius},width:2*P.radius}))}return h/=2,r&&(r.area=f+h,r.arcArea=f,r.polygonArea=h,r.arcs=x,r.innerPoints=o,r.intersectionPoints=e),f+h}function a(t,r){for(var n=0;n<r.length;++n)if(u(t,r[n])>r[n].radius+B)return!1;return!0}function i(t){for(var r=[],n=0;n<t.length;++n)for(var e=n+1;e<t.length;++e)for(var a=f(t[n],t[e]),i=0;i<a.length;++i){var s=a[i];s.parentIndex=[n,e],r.push(s)}return r}function s(t,r){return t*t*Math.acos(1-r/t)-(t-r)*Math.sqrt(r*(2*t-r))}function u(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function o(t,r,n){if(n>=t+r)return 0;if(n<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);var e=t-(n*n-r*r+t*t)/(2*n),a=r-(n*n-t*t+r*r)/(2*n);return s(t,e)+s(r,a)}function f(t,r){var n=u(t,r),e=t.radius,a=r.radius;if(n>=e+a||n<=Math.abs(e-a))return[];var i=(e*e-a*a+n*n)/(2*n),s=Math.sqrt(e*e-i*i),o=t.x+i*(r.x-t.x)/n,f=t.y+i*(r.y-t.y)/n,l=-(r.y-t.y)*(s/n),h=-(r.x-t.x)*(s/n);return[{x:o+l,y:f-h},{x:o-l,y:f+h}]}function l(t){for(var r={x:0,y:0},n=0;n<t.length;++n)r.x+=t[n].x,r.y+=t[n].y;return r.x/=t.length,r.y/=t.length,r}function h(t,r,n,e){e=e||{};var a=e.maxIterations||100,i=e.tolerance||1e-10,s=t(r),u=t(n),o=n-r;if(s*u>0)throw"Initial bisect points must have opposite signs";if(0===s)return r;if(0===u)return n;for(var f=0;f<a;++f){o/=2;var l=r+o,h=t(l);if(h*s>=0&&(r=l),Math.abs(o)<i||0===h)return l}return r+o}function x(t){for(var r=new Array(t),n=0;n<t;++n)r[n]=0;return r}function c(t,r){return x(t).map(function(){return x(r)})}function g(t,r){for(var n=0,e=0;e<t.length;++e)n+=t[e]*r[e];return n}function v(t){return Math.sqrt(g(t,t))}function p(t,r,n){for(var e=0;e<r.length;++e)t[e]=r[e]*n}function y(t,r,n,e,a){for(var i=0;i<t.length;++i)t[i]=r*n[i]+e*a[i]}function d(t,r,n){function e(t){for(var r=0;r<t.length;r++)v[g][r]=t[r];v[g].fx=t.fx}n=n||{};var a,i=n.maxIterations||200*r.length,s=n.nonZeroDelta||1.05,u=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,f=n.minErrorDelta||1e-5,l=void 0!==n.rho?n.rho:1,h=void 0!==n.chi?n.chi:2,x=void 0!==n.psi?n.psi:-.5,c=void 0!==n.sigma?n.sigma:.5,g=r.length,v=new Array(g+1);v[0]=r,v[0].fx=t(r),v[0].id=0;for(var p=0;p<g;++p){var d=r.slice();d[p]=d[p]?d[p]*s:u,v[p+1]=d,v[p+1].fx=t(d),v[p+1].id=p+1}for(var m=function(t,r){return t.fx-r.fx},M=r.slice(),z=r.slice(),b=r.slice(),w=r.slice(),I=0;I<i;++I){if(v.sort(m),n.history){var R=v.map(function(t){var r=t.slice();return r.fx=t.fx,r.id=t.id,r});R.sort(function(t,r){return t.id-r.id}),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:R})}for(a=0,p=0;p<g;++p)a=Math.max(a,Math.abs(v[0][p]-v[1][p]));if(Math.abs(v[0].fx-v[g].fx)<o&&a<f)break;for(p=0;p<g;++p){M[p]=0;for(var P=0;P<g;++P)M[p]+=v[P][p];M[p]/=g}var A=v[g];if(y(z,1+l,M,-l,A),z.fx=t(z),z.fx<v[0].fx)y(w,1+h,M,-h,A),w.fx=t(w),e(w.fx<z.fx?w:z);else if(z.fx>=v[g-1].fx){var O=!1;if(z.fx>A.fx?(y(b,1+x,M,-x,A),b.fx=t(b),b.fx<A.fx?e(b):O=!0):(y(b,1-x*l,M,x*l,A),b.fx=t(b),b.fx<z.fx?e(b):O=!0),O){if(c>=1)break;for(p=1;p<v.length;++p)y(v[p],1-c,v[0],c,v[p]),v[p].fx=t(v[p])}}else e(z)}return v.sort(m),{fx:v[0].fx,x:v[0]}}function m(t,r,n,e,a,i,s){function u(u,h,c){for(var v=0;v<16;++v)if(a=(u+h)/2,y(e.x,1,n.x,a,r),l=e.fx=t(e.x,e.fxprime),x=g(e.fxprime,r),l>o+i*a*f||l>=c)h=a;else{if(Math.abs(x)<=-s*f)return a;x*(h-u)>=0&&(h=u),u=a,c=l}return 0}var o=n.fx,f=g(n.fxprime,r),l=o,h=o,x=f,c=0;a=a||1,i=i||1e-6,s=s||.1;for(var v=0;v<10;++v){if(y(e.x,1,n.x,a,r),l=e.fx=t(e.x,e.fxprime),x=g(e.fxprime,r),l>o+i*a*f||v&&l>=h)return u(c,a,h);if(Math.abs(x)<=-s*f)return a;if(x>=0)return u(a,c,l);h=l,c=a,a*=2}return a}function M(t,r,n){var e,a,i,s={x:r.slice(),fx:0,fxprime:r.slice()},u={x:r.slice(),fx:0,fxprime:r.slice()},o=r.slice(),f=1;n=n||{},i=n.maxIterations||20*r.length,s.fx=t(s.x,s.fxprime),e=s.fxprime.slice(),p(e,s.fxprime,-1);for(var l=0;l<i;++l){if(f=m(t,e,s,u,f),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),alpha:f}),f){y(o,1,u.fxprime,-1,s.fxprime);var h=g(s.fxprime,s.fxprime);y(e,Math.max(0,g(o,u.fxprime)/h),e,-1,u.fxprime),a=s,s=u,u=a}else p(e,s.fxprime,-1);if(v(s.fxprime)<=1e-5)break}return n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),alpha:f}),s}function z(t,r){r=r||{},r.maxIterations=r.maxIterations||500;var n=r.initialLayout||P;t=w(t);var e,a=n(t),i=[],s=[];for(e in a)a.hasOwnProperty(e)&&(i.push(a[e].x),i.push(a[e].y),s.push(e));for(var u=0,o=d(function(r){u+=1;for(var n={},e=0;e<s.length;++e){var i=s[e];n[i]={x:r[2*e],y:r[2*e+1],radius:a[i].radius}}return q(n,t)},i,r),f=o.x,l=0;l<s.length;++l)e=s[l],a[e].x=f[2*l],a[e].y=f[2*l+1];return a}function b(t,r,n){return Math.min(t,r)*Math.min(t,r)*Math.PI<=n+H?Math.abs(t-r):h(function(e){return o(t,r,e)-n},0,t+r)}function w(t){t=t.slice();var r,n,e,a,i=[],s={};for(r=0;r<t.length;++r){var u=t[r];1==u.sets.length?i.push(u.sets[0]):2==u.sets.length&&(e=u.sets[0],a=u.sets[1],s[[e,a]]=!0,s[[a,e]]=!0)}for(i.sort(function(t,r){return t>r}),r=0;r<i.length;++r)for(e=i[r],n=r+1;n<i.length;++n)a=i[n],[e,a]in s||t.push({sets:[e,a],size:0});return t}function I(t,r,n){var e=c(r.length,r.length),a=c(r.length,r.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var i=n[t.sets[0]],s=n[t.sets[1]],u=Math.sqrt(r[i].size/Math.PI),o=Math.sqrt(r[s].size/Math.PI),f=b(u,o,t.size);e[i][s]=e[s][i]=f;var l=0;t.size+1e-10>=Math.min(r[i].size,r[s].size)?l=1:t.size<=1e-10&&(l=-1),a[i][s]=a[s][i]=l}),{distances:e,constraints:a}}function R(t,r,n,e){var a,i=0;for(a=0;a<r.length;++a)r[a]=0;for(a=0;a<n.length;++a)for(var s=t[2*a],u=t[2*a+1],o=a+1;o<n.length;++o){var f=t[2*o],l=t[2*o+1],h=n[a][o],x=e[a][o],c=(f-s)*(f-s)+(l-u)*(l-u),g=Math.sqrt(c),v=c-h*h;x>0&&g<=h||x<0&&g>=h||(i+=2*v*v,r[2*a]+=4*v*(s-f),r[2*a+1]+=4*v*(u-l),r[2*o]+=4*v*(f-s),r[2*o+1]+=4*v*(l-u))}return i}function P(t,r){var n=O(t);if(t.length>=8){var e=A(t,r);q(e,t)+1e-8<q(n,t)&&(n=e)}return n}function A(t,r){r=r||{};var n,e=r.restarts||10,a=[],i={};for(n=0;n<t.length;++n){var s=t[n];1==s.sets.length&&(i[s.sets[0]]=a.length,a.push(s))}var u=I(t,a,i),o=u.distances,f=u.constraints,l=v(o.map(v))/o.length;o=o.map(function(t){return t.map(function(t){return t/l})});var h,c,g=function(t,r){return R(t,r,o,f)};for(n=0;n<e;++n){c=M(g,x(2*o.length).map(Math.random),r),(!h||c.fx<h.fx)&&(h=c)}var y=h.x,d={};for(n=0;n<a.length;++n){var m=a[n];d[m.sets[0]]={x:y[2*n]*l,y:y[2*n+1]*l,radius:Math.sqrt(m.size/Math.PI)}}if(r.history)for(n=0;n<r.history.length;++n)p(r.history[n].x,l);return d}function O(t){function r(t,r){return r.size-t.size}function n(t){return t.set in p}function e(t,r){i[r].x=t.x,i[r].y=t.y,p[r]=!0}for(var a,i={},s={},u=0;u<t.length;++u){var o=t[u];1==o.sets.length&&(a=o.sets[0],i[a]={x:1e10,y:1e10,rowid:i.length,size:o.size,radius:Math.sqrt(o.size/Math.PI)},s[a]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),u=0;u<t.length;++u){var l=t[u],h=l.hasOwnProperty("weight")?l.weight:1,x=l.sets[0],c=l.sets[1];l.size+H>=Math.min(i[x].size,i[c].size)&&(h=0),s[x].push({set:c,size:l.size,weight:h}),s[c].push({set:x,size:l.size,weight:h})}var g=[];for(a in s)if(s.hasOwnProperty(a)){var v=0;for(u=0;u<s[a].length;++u)v+=s[a][u].size*s[a][u].weight;g.push({set:a,size:v})}g.sort(r);var p={};for(e({x:0,y:0},g[0].set),u=1;u<g.length;++u){var y=g[u].set,d=s[y].filter(n);if(a=i[y],d.sort(r),0===d.length)throw"ERROR: missing pairwise overlap information";for(var m=[],M=0;M<d.length;++M){var z=i[d[M].set],w=b(a.radius,z.radius,d[M].size);m.push({x:z.x+w,y:z.y}),m.push({x:z.x-w,y:z.y}),m.push({y:z.y+w,x:z.x}),m.push({y:z.y-w,x:z.x});for(var I=M+1;I<d.length;++I)for(var R=i[d[I].set],P=b(a.radius,R.radius,d[I].size),A=f({x:z.x,y:z.y,radius:w},{x:R.x,y:R.y,radius:P}),O=0;O<A.length;++O)m.push(A[O])}var j=1e50,k=m[0];for(M=0;M<m.length;++M){i[y].x=m[M].x,i[y].y=m[M].y;var F=q(i,t);F<j&&(j=F,k=m[M])}e(k,y)}return i}function q(t,r){for(var n=0,a=0;a<r.length;++a){var i,s=r[a];if(1!=s.sets.length){if(2==s.sets.length){var f=t[s.sets[0]],l=t[s.sets[1]];i=o(f.radius,l.radius,u(f,l))}else i=e(function(r){return r.map(function(r){return t[r]})}(s.sets));n+=(s.hasOwnProperty("weight")?s.weight:1)*(i-s.size)*(i-s.size)}}return n}function j(t,r,n){null===n?t.sort(function(t,r){return r.radius-t.radius}):t.sort(n);var e;if(t.length>0){var a=t[0].x,i=t[0].y;for(e=0;e<t.length;++e)t[e].x-=a,t[e].y-=i}if(t.length>1){var s,u,o=Math.atan2(t[1].x,t[1].y)-r,f=Math.cos(o),l=Math.sin(o);for(e=0;e<t.length;++e)s=t[e].x,u=t[e].y,t[e].x=f*s-l*u,t[e].y=l*s+f*u}if(t.length>2){for(var h=Math.atan2(t[2].x,t[2].y)-r;h<0;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(h>Math.PI){var x=t[1].y/(1e-10+t[1].x);for(e=0;e<t.length;++e){var c=(t[e].x+x*t[e].y)/(1+x*x);t[e].x=2*c-t[e].x,t[e].y=2*c*x-t[e].y}}}}function k(t){function r(t){return t.parent!==t&&(t.parent=r(t.parent)),t.parent}t.map(function(t){t.parent=t});for(var n=0;n<t.length;++n)for(var e=n+1;e<t.length;++e){var a=t[n].radius+t[e].radius;u(t[n],t[e])+1e-10<a&&function(t,n){var e=r(t),a=r(n);e.parent=a}(t[e],t[n])}var i,s={};for(n=0;n<t.length;++n)i=r(t[n]).parent.setid,i in s||(s[i]=[]),s[i].push(t[n]);t.map(function(t){delete t.parent});var o=[];for(i in s)s.hasOwnProperty(i)&&o.push(s[i]);return o}function F(t){var r=function(r){return{max:Math.max.apply(null,t.map(function(t){return t[r]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[r]-t.radius}))}};return{xRange:r("x"),yRange:r("y")}}function C(t,r,n){function e(t,r,n){if(t){var e,a,i,u=t.bounds;r?e=l.xRange.max-u.xRange.min+h:(e=l.xRange.max-u.xRange.max,(i=(u.xRange.max-u.xRange.min)/2-(l.xRange.max-l.xRange.min)/2)<0&&(e+=i)),n?a=l.yRange.max-u.yRange.min+h:(a=l.yRange.max-u.yRange.max,(i=(u.yRange.max-u.yRange.min)/2-(l.yRange.max-l.yRange.min)/2)<0&&(a+=i));for(var o=0;o<t.length;++o)t[o].x+=e,t[o].y+=a,s.push(t[o])}}null===r&&(r=Math.PI/2);var a,i,s=[];for(i in t)if(t.hasOwnProperty(i)){var u=t[i];s.push({x:u.x,y:u.y,radius:u.radius,setid:i})}var o=k(s);for(a=0;a<o.length;++a){j(o[a],r,n);var f=F(o[a]);o[a].size=(f.xRange.max-f.xRange.min)*(f.yRange.max-f.yRange.min),o[a].bounds=f}o.sort(function(t,r){return r.size-t.size}),s=o[0];for(var l=s.bounds,h=(l.xRange.max-l.xRange.min)/50,x=1;x<o.length;)e(o[x],!0,!1),e(o[x+1],!1,!0),e(o[x+2],!0,!0),x+=3,l=F(s);var c={};for(a=0;a<s.length;++a)c[s[a].setid]=s[a];return c}function D(t,r,n,e){var a=[],i=[];for(var s in t)t.hasOwnProperty(s)&&(i.push(s),a.push(t[s]));r-=2*e,n-=2*e;var u=F(a),o=u.xRange,f=u.yRange;if(o.max==o.min||f.max==f.min)return console.log("not scaling solution: zero size detected"),t;for(var l=r/(o.max-o.min),h=n/(f.max-f.min),x=Math.min(h,l),c=(r-(o.max-o.min)*x)/2,g=(n-(f.max-f.min)*x)/2,v={},p=0;p<a.length;++p){var y=a[p];v[i[p]]={radius:x*y.radius,x:e+c+(y.x-o.min)*x,y:e+g+(y.y-f.min)*x}}return v}function T(){function t(t){function x(t){return t.sets in m?m[t.sets]:1==t.sets.length?""+t.sets[0]:void 0}var c=t.datum(),g=p(c);u&&(g=C(g,s,h));var y=D(g,n,e,a),d=N(y,c),m={};c.forEach(function(t){m[t.sets]=t.label}),t.selectAll("svg").data([y]).enter().append("svg");var M=t.select("svg").attr("width",n).attr("height",e),z={},b=!1;M.selectAll(".venn-area path").each(function(t){var n=r.select(this).attr("d");1==t.sets.length&&n&&(b=!0,z[t.sets[0]]=W(n))});var w=function(t){return function(r){return Z(t.sets.map(function(t){var a=z[t],i=y[t];return a||(a={x:n/2,y:e/2,radius:1}),i||(i={x:n/2,y:e/2,radius:1}),{x:a.x*(1-r)+i.x*r,y:a.y*(1-r)+i.y*r,radius:a.radius*(1-r)+i.radius*r}}))}},I=M.selectAll(".venn-area").data(c,function(t){return t.sets}),R=I.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),P=R.append("path"),A=R.append("text").attr("class","label").text(function(t){return x(t)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",n/2).attr("y",e/2);f&&(P.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return v(t.sets)}).style("fill-opacity",".25"),A.style("fill",function(t){return 1==t.sets.length?v(t.sets):"#444"}));var O=t;b?(O=t.transition("venn").duration(i),O.selectAll("path").attrTween("d",w)):O.selectAll("path").attr("d",function(t){return Z(t.sets.map(function(t){return y[t]}))});var q=O.selectAll("text").filter(function(t){return t.sets in d}).text(function(t){return x(t)}).attr("x",function(t){return Math.floor(d[t.sets].x)}).attr("y",function(t){return Math.floor(d[t.sets].y)});o&&(b?"on"in q?q.on("end",E(y,x)):q.each("end",E(y,x)):q.each(E(y,x)));var j=I.exit().transition("venn").duration(i).remove();j.selectAll("path").attrTween("d",w);var k=j.selectAll("text").attr("x",n/2).attr("y",e/2);return null!==l&&(A.style("font-size","0px"),q.style("font-size",l),k.style("font-size","0px")),{circles:y,textCentres:d,nodes:I,enter:R,update:O,exit:j}}var n=600,e=350,a=15,i=1e3,s=Math.PI/2,u=!0,o=!0,f=!0,l=null,h=null,x={},c=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],g=0,v=function(t){if(t in x)return x[t];var r=x[t]=c[g];return g+=1,g>=c.length&&(g=0),r},p=z;return t.wrap=function(r){return arguments.length?(o=r,t):o},t.width=function(r){return arguments.length?(n=r,t):n},t.height=function(r){return arguments.length?(e=r,t):e},t.padding=function(r){return arguments.length?(a=r,t):a},t.colours=function(r){return arguments.length?(v=r,t):v},t.fontSize=function(r){return arguments.length?(l=r,t):l},t.duration=function(r){return arguments.length?(i=r,t):i},t.layoutFunction=function(r){return arguments.length?(p=r,t):p},t.normalize=function(r){return arguments.length?(u=r,t):u},t.styled=function(r){return arguments.length?(f=r,t):f},t.orientation=function(r){return arguments.length?(s=r,t):s},t.orientationOrder=function(r){return arguments.length?(h=r,t):h},t}function E(t,n){return function(){for(var e,a=r.select(this),i=a.datum(),s=t[i.sets[0]].radius||50,u=n(i)||"",o=u.split(/\s+/).reverse(),f=(u.length+o.length)/3,l=o.pop(),h=[l],x=0,c=a.text(null).append("tspan").text(l);;){if(!(l=o.pop()))break;h.push(l),e=h.join(" "),c.text(e),e.length>f&&c.node().getComputedTextLength()>s&&(h.pop(),c.text(h.join(" ")),h=[l],c=a.append("tspan").text(l),x++)}var g=.35-1.1*x/2,v=a.attr("x"),p=a.attr("y");a.selectAll("tspan").attr("x",v).attr("y",p).attr("dy",function(t,r){return g+1.1*r+"em"})}}function L(t,r,n){var e,a,i=r[0].radius-u(r[0],t);for(e=1;e<r.length;++e)(a=r[e].radius-u(r[e],t))<=i&&(i=a);for(e=0;e<n.length;++e)(a=u(n[e],t)-n[e].radius)<=i&&(i=a);return i}function S(t,r){var n,a=[];for(n=0;n<t.length;++n){var i=t[n];a.push({x:i.x,y:i.y}),a.push({x:i.x+i.radius/2,y:i.y}),a.push({x:i.x-i.radius/2,y:i.y}),a.push({x:i.x,y:i.y+i.radius/2}),a.push({x:i.x,y:i.y-i.radius/2})}var s=a[0],o=L(a[0],t,r);for(n=1;n<a.length;++n){var f=L(a[n],t,r);f>=o&&(s=a[n],o=f)}var h=d(function(n){return-1*L({x:n[0],y:n[1]},t,r)},[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,x={x:h[0],y:h[1]},c=!0;for(n=0;n<t.length;++n)if(u(x,t[n])>t[n].radius){c=!1;break}for(n=0;n<r.length;++n)if(u(x,r[n])<r[n].radius){c=!1;break}if(!c)if(1==t.length)x={x:t[0].x,y:t[0].y};else{var g={};e(t,g),x=0===g.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==g.arcs.length?{x:g.arcs[0].circle.x,y:g.arcs[0].circle.y}:r.length?S(t,[]):l(g.arcs.map(function(t){return t.p1}))}return x}function _(t){var r={},n=[];for(var e in t)n.push(e),r[e]=[];for(var a=0;a<n.length;a++)for(var i=t[n[a]],s=a+1;s<n.length;++s){var o=t[n[s]],f=u(i,o);f+o.radius<=i.radius+1e-10?r[n[s]].push(n[a]):f+i.radius<=o.radius+1e-10&&r[n[a]].push(n[s])}return r}function N(t,r){for(var n={},e=_(t),a=0;a<r.length;++a){for(var i=r[a].sets,s={},u={},o=0;o<i.length;++o){s[i[o]]=!0;for(var f=e[i[o]],l=0;l<f.length;++l)u[f[l]]=!0}var h=[],x=[];for(var c in t)c in s?h.push(t[c]):c in u||x.push(t[c]);var g=S(h,x);n[i]=g,g.disjoint&&r[a].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function G(t,r){function n(t){for(var r=0;r<t.length;++r)if(!(t[r]in a))return!1;return!0}for(var e=_(t.selectAll("svg").datum()),a={},i=0;i<r.sets.length;++i){var s=r.sets[i];for(var u in e)for(var o=e[u],f=0;f<o.length;++f)if(o[f]==s){a[u]=!0;break}}t.selectAll("g").sort(function(t,e){return t.sets.length!=e.sets.length?t.sets.length-e.sets.length:t==r?n(e.sets)?-1:1:e==r?n(t.sets)?1:-1:e.size-t.size})}function V(t,r,n){var e=[];return e.push("\nM",t,r),e.push("\nm",-n,0),e.push("\na",n,n,0,1,0,2*n,0),e.push("\na",n,n,0,1,0,2*-n,0),e.join(" ")}function W(t){var r=t.split(" ");return{x:parseFloat(r[1]),y:parseFloat(r[2]),radius:-parseFloat(r[4])}}function Z(t){var r={};e(t,r);var n=r.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var a=n[0].circle;return V(a.x,a.y,a.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],s=0;s<n.length;++s){var u=n[s],o=u.circle.radius,f=u.width>o;i.push("\nA",o,o,0,f?1:0,1,u.p1.x,u.p1.y)}return i.join(" ")}var B=1e-10,H=1e-10;t.intersectionArea=e,t.circleCircleIntersection=f,t.circleOverlap=o,t.circleArea=s,t.distance=u,t.venn=z,t.greedyLayout=O,t.scaleSolution=D,t.normalizeSolution=C,t.bestInitialLayout=P,t.lossFunction=q,t.disjointCluster=k,t.distanceFromIntersectArea=b,t.VennDiagram=T,t.wrapText=E,t.computeTextCentres=N,t.computeTextCentre=S,t.sortAreas=G,t.circlePath=V,t.circleFromPath=W,t.intersectionAreaPath=Z,Object.defineProperty(t,"__esModule",{value:!0})});